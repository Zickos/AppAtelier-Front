<template>
  <DashboardLayout>
    <div class="bg-gray-50 py-12 px-6 min-h-full">
      <div class="max-w-7xl mx-auto space-y-10">
        <!-- Titre -->
        <header class="space-y-1">
          <h1 class="text-4xl font-bold text-gray-800">ğŸ‘‹ Bonjour {{ auth.user?.prenom || 'Utilisateur' }}</h1>
          <p class="text-gray-600">Bienvenue sur votre tableau de bord personnalisÃ©.</p>
        </header>

        <!-- RÃ©sumÃ©s -->
        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6">
          <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold text-indigo-700">ğŸ“† Planning personnel</h2>
            <p class="text-sm text-gray-500 mt-2">3 tÃ¢ches prÃ©vues cette semaine</p>
            <RouterLink to="/planningpersonnel" class="mt-4 inline-block text-sm text-indigo-600 hover:underline">
              Voir mon planning â†’
            </RouterLink>
          </div>

          <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold text-indigo-700">ğŸš— VÃ©hicules affectÃ©s</h2>
            <p class="text-sm text-gray-500 mt-2">1 vÃ©hicule actif (Charlatte - FEN01)</p>
            <RouterLink to="/vehiclelist" class="mt-4 inline-block text-sm text-indigo-600 hover:underline">
              GÃ©rer mes vÃ©hicules â†’
            </RouterLink>
          </div>

          <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold text-indigo-700">ğŸ› ï¸ Retrofits</h2>
            <p class="text-sm text-gray-500 mt-2">2 retrofits assignÃ©s</p>
            <RouterLink to="/gestionretrofit" class="mt-4 inline-block text-sm text-indigo-600 hover:underline">
              Voir les retrofits â†’
            </RouterLink>
          </div>

          <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold text-indigo-700">ğŸ“‹ Demandes</h2>
            <p class="text-sm text-gray-500 mt-2">2 demandes en attente</p>
            <RouterLink to="/gestiondemande" class="mt-4 inline-block text-sm text-indigo-600 hover:underline">
              GÃ©rer mes demandes â†’
            </RouterLink>
          </div>
        </div>

        <!-- Bloc DÃ©tail -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div class="bg-white rounded-xl p-6 shadow space-y-3">
            <h3 class="text-lg font-bold text-indigo-800">ğŸ“… Prochaines tÃ¢ches</h3>
            <ul class="text-sm text-gray-700 space-y-1">
              <li>ğŸ› ï¸ Retrofit TMX - du 2 au 4 aoÃ»t</li>
              <li>ğŸ” Inspection technique - 5 aoÃ»t</li>
              <li>ğŸšš Livraison client - 8 aoÃ»t</li>
            </ul>
          </div>

          <div class="bg-white rounded-xl p-6 shadow space-y-3">
            <h3 class="text-lg font-bold text-indigo-800">ğŸ”” Derniers changements</h3>
            <ul class="text-sm text-gray-700 space-y-1">
              <li>âœ… Demande #42 traitÃ©e par Lucas</li>
              <li>âš ï¸ VÃ©hicule TMX02 indisponible (maintenance)</li>
              <li>ğŸ“© Nouvelle demande de retrait en attente</li>
            </ul>
          </div>
        </div>

        <!-- Bloc Admin (si rÃ´le admin ou manager) -->
        <div v-if="[1, 2].includes(auth.user?.role_id)" class="bg-white rounded-xl p-6 shadow space-y-3">
          <h3 class="text-lg font-bold text-indigo-800">âš™ï¸ Administration</h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
            <RouterLink
              to="/gestionplanningmecano"
              class="block bg-indigo-100 hover:bg-indigo-200 text-indigo-800 rounded-lg p-4 text-center text-sm font-medium transition"
            >
              ğŸ”§ Planning atelier
            </RouterLink>
            <RouterLink
              to="/gestionvehicle"
              class="block bg-indigo-100 hover:bg-indigo-200 text-indigo-800 rounded-lg p-4 text-center text-sm font-medium transition"
            >
              ğŸš˜ VÃ©hicules
            </RouterLink>
            <RouterLink
              to="/gestionretrofit"
              class="block bg-indigo-100 hover:bg-indigo-200 text-indigo-800 rounded-lg p-4 text-center text-sm font-medium transition"
            >
              ğŸ› ï¸ Retrofits
            </RouterLink>
          </div>
        </div>
      </div>
    </div>
  </DashboardLayout>
</template>

<script setup>
import { RouterLink } from 'vue-router'
import DashboardLayout from '@/layouts/DashboardLayout.vue'
import { useAuthStore } from '@/stores/auth'

const auth = useAuthStore()
</script>
